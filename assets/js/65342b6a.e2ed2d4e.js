"use strict";(self.webpackChunktemp=self.webpackChunktemp||[]).push([[9895],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),i=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=i(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),d=i(a),k=r,u=d["".concat(s,".").concat(k)]||d[k]||c[k]||l;return a?n.createElement(u,o(o({ref:t},m),{},{components:a})):n.createElement(u,o({ref:t},m))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var i=2;i<l;i++)o[i]=a[i];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},1007:(e,t,a)=>{a.d(t,{Z:()=>k});var n=a(7294),r=a(6010);const l="browserWindow_my1Q",o="browserWindowHeader_jXSR",p="buttons_uHc7",s="browserWindowAddressBar_Pd8y",i="dot_giz1",m="browserWindowMenuIcon_Vhuh",c="bar_rrRL",d="browserWindowBody_Idgs";function k(e){let{children:t,minHeight:a,url:k="http://localhost:3000"}=e;return n.createElement("div",{className:l,style:{minHeight:a}},n.createElement("div",{className:o},n.createElement("div",{className:p},n.createElement("span",{className:i,style:{background:"#f25f58"}}),n.createElement("span",{className:i,style:{background:"#fbbe3c"}}),n.createElement("span",{className:i,style:{background:"#58cb42"}})),n.createElement("div",{className:(0,r.Z)(s,"text--truncate")},k),n.createElement("div",{className:m},n.createElement("div",null,n.createElement("span",{className:c}),n.createElement("span",{className:c}),n.createElement("span",{className:c})))),n.createElement("div",{className:d},t))}},2232:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294);const r="codeDescription_fg9D",l="codeDescriptionBody_Gp1s";function o(e){let{children:t,minHeight:a}=e;return n.createElement("div",{className:r,style:{minHeight:a}},n.createElement("div",{className:l},t))}},3691:(e,t,a)=>{a.d(t,{L:()=>r,W:()=>l});var n=a(7294);function r(e){let{children:t}=e;return n.createElement("span",{style:{backgroundColor:"#9747FF",borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)}function l(e){let{children:t}=e;return n.createElement("span",{style:{backgroundColor:"#6A77D7",borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)}},5345:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294);const r="PreviewDescription_enzD",l="PreviewDescriptionBody_t2U9";function o(e){let{children:t,minHeight:a}=e;return n.createElement("div",{className:r,style:{minHeight:a}},n.createElement("div",{className:l},t))}},5505:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>m,default:()=>g,frontMatter:()=>i,metadata:()=>c,toc:()=>k});var n=a(7462),r=(a(7294),a(3905)),l=a(2232),o=a(5345),p=a(1007),s=a(3691);const i={sidebar_position:6,description:"\ud83d\udccc DB \ucee8\ud14c\uc774\ub108\uc640 Data Generator \ucee8\ud14c\uc774\ub108\ub97c \ud568\uaed8 \ub744\uc6b0\uae30 \uc704\ud55c Docker Compose \ud30c\uc77c\uc744 \uc791\uc131\ud569\ub2c8\ub2e4."},m="6) Data Generator on Docker Compose",c={unversionedId:"database/data-generator-docker-compose",id:"database/data-generator-docker-compose",title:"6) Data Generator on Docker Compose",description:"\ud83d\udccc DB \ucee8\ud14c\uc774\ub108\uc640 Data Generator \ucee8\ud14c\uc774\ub108\ub97c \ud568\uaed8 \ub744\uc6b0\uae30 \uc704\ud55c Docker Compose \ud30c\uc77c\uc744 \uc791\uc131\ud569\ub2c8\ub2e4.",source:"@site/docs/database/data-generator-docker-compose.mdx",sourceDirName:"database",slug:"/database/data-generator-docker-compose",permalink:"/tutorial/docs/database/data-generator-docker-compose",draft:!1,editUrl:"https://github.com/mlops-for-mle/tutorial/tree/main/docs/database/data-generator-docker-compose.mdx",tags:[],version:"current",lastUpdatedBy:"Seokgi Kim",lastUpdatedAt:1671781831,formattedLastUpdatedAt:"Dec 23, 2022",sidebarPosition:6,frontMatter:{sidebar_position:6,description:"\ud83d\udccc DB \ucee8\ud14c\uc774\ub108\uc640 Data Generator \ucee8\ud14c\uc774\ub108\ub97c \ud568\uaed8 \ub744\uc6b0\uae30 \uc704\ud55c Docker Compose \ud30c\uc77c\uc744 \uc791\uc131\ud569\ub2c8\ub2e4."},sidebar:"tutorialSidebar",previous:{title:"5) Data Generator on Docker",permalink:"/tutorial/docs/database/data-generator-docker"},next:{title:"02. Model Development",permalink:"/tutorial/docs/category/02-model-development"}},d={},k=[{value:"Chapter Preview",id:"chapter-preview",level:2},{value:"\ubaa9\ud45c",id:"\ubaa9\ud45c",level:3},{value:"\uc2a4\ud399 \uba85\uc138\uc11c",id:"\uc2a4\ud399-\uba85\uc138\uc11c",level:3},{value:"0. \ud658\uacbd \uc124\uc815",id:"0-\ud658\uacbd-\uc124\uc815",level:2},{value:"1. Dockerfile",id:"1-dockerfile",level:2},{value:"2. Docker Compose",id:"2-docker-compose",level:2},{value:"2.1 Postgres Server Service",id:"21-postgres-server-service",level:3},{value:"2.2 Data Generator Service",id:"22-data-generator-service",level:3},{value:"2.3 Docker Compose Healthcheck",id:"23-docker-compose-healthcheck",level:3},{value:"2.4 Docker Compose Network",id:"24-docker-compose-network",level:3},{value:"2.4.1 Default Network",id:"241-default-network",level:4},{value:"2.4.2 Custom Network",id:"242-custom-network",level:4},{value:"2.4.3 \uc2e4\ud589",id:"243-\uc2e4\ud589",level:4},{value:"3. \ub370\uc774\ud130 \ud655\uc778",id:"3-\ub370\uc774\ud130-\ud655\uc778",level:2},{value:"3.1 In Local",id:"31-in-local",level:3},{value:"3.2 In Data Generator Container",id:"32-in-data-generator-container",level:3}],u={toc:k};function g(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"6-data-generator-on-docker-compose"},"6) Data Generator on Docker Compose"),(0,r.kt)(o.Z,{mdxType:"PreviewDescription"},(0,r.kt)("h2",{id:"chapter-preview"},"Chapter Preview"),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"\ubaa9\ud45c"},"\ubaa9\ud45c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"DB \ucee8\ud14c\uc774\ub108\uc640 Data Generator \ucee8\ud14c\uc774\ub108\ub97c \ud568\uaed8 \ub744\uc6b0\uae30 \uc704\ud55c Docker Compose \ud30c\uc77c\uc744 \uc791\uc131\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"DB \uc548\uc5d0 \ub370\uc774\ud130\uac00 \uacc4\uc18d\ud574\uc11c \uc0bd\uc785\ub418\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.")),(0,r.kt)("h3",{id:"\uc2a4\ud399-\uba85\uc138\uc11c"},"\uc2a4\ud399 \uba85\uc138\uc11c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Docker Compose \ud30c\uc77c\uc744 \uc791\uc131\ud569\ub2c8\ub2e4."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Postgres Server",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Service name")," : ",(0,r.kt)("code",null,"postgres-server")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Image")," : ",(0,r.kt)("code",null,"postgres:14.0")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Container name")," : ",(0,r.kt)("code",null,"postgres-server")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Environment"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"POSTGRES_USER")," : ",(0,r.kt)("code",null,"myuser")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"POSTGRES_PASSWORD")," : ",(0,r.kt)("code",null,"mypassword")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"POSTGRES_DB")," : ",(0,r.kt)("code",null,"mydatabase")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Port forwarding")," : ",(0,r.kt)("code",null,"5432:5432")))),(0,r.kt)("li",{parentName:"ul"},"Data Generator",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Service name")," : ",(0,r.kt)("code",null,"data-generator")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Image")," : ",(0,r.kt)("code",null,"Dockerfile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Container name")," : ",(0,r.kt)("code",null,"data-generator")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"Command")," : ",(0,r.kt)("code",null,'["postgres-server"]'))))),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Postgres Server \uc11c\ube44\uc2a4\uc640 Data Generator \uc11c\ube44\uc2a4\ub97c \ub744\uc6b8 \ub54c \uc5b4\ub5a4 \uc11c\ube44\uc2a4\uac00 \uba3c\uc800 \ub744\uc6cc\uc838\uc57c \ud558\ub294\uc9c0 \uc0dd\uac01\ud574\ubcf4\uace0, \uadf8 \uae30\ub2a5\uc744 Compose \ud30c\uc77c\uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Docker Compose \ud30c\uc77c\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"psql")," \uc744 \uc774\uc6a9\ud558\uc5ec DB \uc5d0 \ub370\uc774\ud130\uac00 \uacc4\uc18d\ud574\uc11c \uc313\uc774\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Local \uc5d0\uc11c \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"Data Generator server \uc5d0\uc11c \ud655\uc778\ud569\ub2c8\ub2e4."))))),(0,r.kt)(p.Z,{url:"https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch1",mdxType:"BrowserWindow"},(0,r.kt)("p",null,"\ud574\ub2f9 \ud30c\ud2b8\uc758 \uc804\uccb4 \ucf54\ub4dc\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch1"},"mlops-for-mle/ch1/")," \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"ch1\n// highlight-next-line\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 create_table.py\n// highlight-next-line\n\u251c\u2500\u2500 data_generator.py\n// highlight-next-line\n\u251c\u2500\u2500 docker-compose.yaml\n\u251c\u2500\u2500 insert_data.py\n\u2514\u2500\u2500 insert_data_loop.py\n"))),(0,r.kt)("h2",{id:"0-\ud658\uacbd-\uc124\uc815"},"0. \ud658\uacbd \uc124\uc815"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"\ud83d\udccc \uc774\ubc88 \ucc55\ud130\uc5d0\uc11c\ub294 Docker Compose \ub97c \uc774\uc6a9\ud558\uc5ec \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\ub294 \ubc95\uc5d0 \ub300\ud574\uc11c \uc2e4\uc2b5\ud569\ub2c8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\ud83d\udccc \uc774\ub97c \uc704\ud574\uc11c \uc55e\uc11c ",(0,r.kt)(s.W,{mdxType:"Chapter"},"1) DB Server Creation")," \ucc55\ud130\uc640 ",(0,r.kt)(s.W,{mdxType:"Chapter"},"5) Data Generator on Docker")," \ucc55\ud130\uc5d0\uc11c \uc2dc\uc791\ud55c \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\ud574\uc57c \ud569\ub2c8\ub2e4. ")),(0,r.kt)("p",null,"\ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc2e4\ud589\uc911\uc778 DB \uc11c\ubc84\uc640 Data Generator \ub97c \uc885\ub8cc\uc2dc\ud0b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker rm --force postgres-server data-generator\n")),(0,r.kt)("h2",{id:"1-dockerfile"},"1. Dockerfile"),(0,r.kt)(s.W,{mdxType:"Chapter"},"5) Data Generator on Docker")," \ucc55\ud130\uc5d0\uc11c \uc791\uc131\ud55c ",(0,r.kt)("code",null,"Dockerfile")," \uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-docker",metastring:'title="Dockerfile"',title:'"Dockerfile"'},'FROM amd64/python:3.9-slim\n\nRUN apt-get update && apt-get install -y \\\n    postgresql-client \\\n    && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /usr/app\n\nRUN pip install -U pip &&\\\n    pip install scikit-learn pandas psycopg2-binary\n\nCOPY data_generator.py data_generator.py\n\nENTRYPOINT ["python", "data_generator.py", "--db-host"]\n# Change CMD to solve host finding error\nCMD ["localhost"]\n')),(0,r.kt)("h2",{id:"2-docker-compose"},"2. Docker Compose"),(0,r.kt)("p",null,"\uc774\uc81c Compose \ud30c\uc77c\uc744 \uc791\uc131\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"Compose \ud30c\uc77c\uc758 \uc544\ud0a4\ud14d\ucc98\ub294 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},'version: "3"\n\nservices:\n  postgres-server:\n    ...\n  data-generator:\n    ...\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"version")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Compose \ud30c\uc77c\uc758 \ubc84\uc804\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc740 ",(0,r.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/compose-file/compose-versioning/"},"\uacf5\uc2dd \ud648\ud398\uc774\uc9c0"),"\uc5d0\uc11c \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774\ubc88 \ucc55\ud130\uc5d0\uc11c\ub294 \uc791\uc131\uc77c \uae30\uc900 \ucd5c\uc2e0 \ubc84\uc804\uc778 ",(0,r.kt)("code",null,"3")," \uc744 \uc0ac\uc6a9\ud558\uaca0\uc2b5\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"services")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Compose \uc5d0 \ubb36\uc77c \uc11c\ube44\uc2a4\ub4e4\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \ud558\ub098\uc758 \uc11c\ube44\uc2a4\ub294 \ud558\ub098\uc758 \ucee8\ud14c\uc774\ub108\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"postgres-server")," : ",(0,r.kt)(s.W,{mdxType:"Chapter"},"01) DB Server Creation")," \ucc55\ud130\uc5d0\uc11c \uc0ac\uc6a9\ud55c DB \uc11c\ubc84\ub97c \uc2e4\ud589\uc2dc\ud0a4\uae30 \uc704\ud55c \ub0b4\uc6a9\uc744 \uc815\uc758\ud560 \uc11c\ube44\uc2a4 \uc774\ub984\uc785\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"data-generator")," : ",(0,r.kt)(s.W,{mdxType:"Chapter"},"05) Data Generator on Docker")," \ucc55\ud130\uc5d0\uc11c \uc0ac\uc6a9\ud55c Data Generator \ub97c \uc2e4\ud589\uc2dc\ud0a4\uae30 \uc704\ud55c \ub0b4\uc6a9\uc744 \uc815\uc758\ud560 \uc11c\ube44\uc2a4 \uc774\ub984\uc785\ub2c8\ub2e4."))))),(0,r.kt)("p",null,"\uc774\uc81c \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 postgres server \uc11c\ube44\uc2a4\uc640 \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud560 Data Generator \uc11c\ube44\uc2a4\ub97c \uc791\uc131\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"21-postgres-server-service"},"2.1 Postgres Server Service"),(0,r.kt)("p",null,"\uba3c\uc800, ",(0,r.kt)("inlineCode",{parentName:"p"},"postgres-server")," \uc11c\ube44\uc2a4\ub97c \uc544\ub798\uc640 \uac19\uc774 yaml \ud615\ud0dc\ub85c \uc791\uc131\ud569\ub2c8\ub2e4.\n",(0,r.kt)("inlineCode",{parentName:"p"},"postgres-server")," \uc11c\ube44\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uac12\ub4e4\uc740 ",(0,r.kt)(s.W,{mdxType:"Chapter"},"01) DB Server Creation")," \ucc55\ud130\uc5d0\uc11c \uc0ac\uc6a9\ud55c \uac12\uacfc \uac19\uc740 \uac12\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},'version: "3"\n\nservices:\n  postgres-server:\n    image: postgres:14.0\n    container_name: postgres-server\n    ports:\n      - 5432:5432\n    environment:\n      POSTGRES_USER: myuser\n      POSTGRES_PASSWORD: mypassword\n      POSTGRES_DB: mydatabase\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"postgres-server")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc11c\ube44\uc2a4\uc758 \uc774\ub984\uc785\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc785\ub825\ud55c \uc774\ub984\uc740 \uc2e4\ud589\ub418\ub294 \ucee8\ud14c\uc774\ub108\uc758 \ud638\uc2a4\ud2b8 \uc774\ub984\uc774 \ub429\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"image")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\ud560 \ucee8\ud14c\uc774\ub108\uc758 \uc774\ubbf8\uc9c0\ub97c \uc785\ub825\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"ports")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc678\ubd80\ub85c \ub178\ucd9c\ud560 \ud3ec\ud2b8 \ud3ec\uc6cc\ub529\uc744 \uc124\uc815\ud569\ub2c8\ub2e4.  "),(0,r.kt)("li",{parentName:"ul"},"\ud615\uc2dd\uc740 ",(0,r.kt)("code",null,"host:container")," \ub85c \uc0ac\uc6a9\ub418\uba70 \uc5ec\ub7ec \uac1c\ub97c \uc9c0\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"environment")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589\ud560 \ub54c \uc0ac\uc6a9\ud55c ",(0,r.kt)("code",null,"-e")," \uc635\uc158\uacfc \uac19\uc740 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4."))))),(0,r.kt)("h3",{id:"22-data-generator-service"},"2.2 Data Generator Service"),(0,r.kt)("p",null,"\ub2e4\uc74c\uc73c\ub85c, ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \uc11c\ube44\uc2a4\ub97c \uc544\ub798\uc640 \uac19\uc774 yaml \ud615\ud0dc\ub85c \uc791\uc131\ud569\ub2c8\ub2e4.\n",(0,r.kt)("inlineCode",{parentName:"p"},"postgres-server")," \uc11c\ube44\uc2a4\uc640 \ub2e4\ub974\uac8c \uc774\ubc88\uc5d0\ub294 \uc9c1\uc811 \uc774\ubbf8\uc9c0\ub97c build \ud574\uc11c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},'  data-generator:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: data-generator\n    depends_on:\n      - postgres-server\n    command: ["postgres-server"]\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"build")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"context")," : \uc774\ubbf8\uc9c0\ub97c build \ud558\uae30 \uc704\ud574 Dockerfile \uc774 \uc788\ub294 \uc808\ub300\uacbd\ub85c \ub610\ub294 \uc0c1\ub300\uacbd\ub85c\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"dockerfile")," : ",(0,r.kt)("var",null,"context")," \uc5d0\uc11c \uc124\uc815\ud55c \uacbd\ub85c\uc5d0 \uc788\ub294 Dockerfile \uc758 \ud30c\uc77c\uba85\uc744 \uc785\ub825\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"depends_on")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Compose \ub85c \ub744\uc6cc\uc9c0\ub294 \uc11c\ube44\uc2a4 \uac04\uc758 \uc885\uc18d\uc131 \uc21c\uc11c\ub300\ub85c \uc11c\ube44\uc2a4\ub97c \uc2dc\uc791\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc5ec\uae30\uc11c\ub294 postgres server \uac00 \uba3c\uc800 \uc2e4\ud589\ub418\uace0 \ub09c \ub4a4\uc5d0 Data Generator \ub97c \uc2e4\ud589\ud574\uc57c \ud558\uae30 \ub54c\ubb38\uc5d0 postgres server \uc758 \uc11c\ube44\uc2a4 \uc774\ub984\uc778 ",(0,r.kt)("inlineCode",{parentName:"li"},"postgres-server")," \ub97c \uc785\ub825\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"command")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Dockerfile \uc5d0 \uc791\uc131\ub418\uc5b4 \uc788\ub294 ",(0,r.kt)("code",null,"CMD")," \ub97c \ub36e\uc5b4\uc501\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(s.W,{mdxType:"Chapter"},"5) Data Generator on Docker")," \ucc55\ud130\uc5d0\uc11c \uc791\uc131\ud55c Data Generator \ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 postgres server \uc758 \ud638\uc2a4\ud2b8\ub97c \ubcc0\uacbd\ud574\uc57c \ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\ud638\uc2a4\ud2b8 \uc774\ub984\uc740 \uc704\uc5d0\uc11c \uc5b8\uae09\ud55c \uac83\ucc98\ub7fc \ucee8\ud14c\uc774\ub108\uc758 \uc774\ub984\uc73c\ub85c \uc8fc\uc5b4\uc57c \ud558\uae30 \ub54c\ubb38\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"li"},'["postgres-server"]')," \ub85c \ub36e\uc5b4\uc501\ub2c8\ub2e4."))))),(0,r.kt)("h3",{id:"23-docker-compose-healthcheck"},"2.3 Docker Compose Healthcheck"),(0,r.kt)("p",null,"\uc55e\uc11c \uc791\uc131\ud55c ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yaml")," \ud30c\uc77c\uc758 \ub0b4\uc6a9\uc744 \ud568\uaed8 \ub098\uc5f4\ud558\uba74 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},'version: "3"\n\nservices:\n  postgres-server:\n    image: postgres:14.0\n    container_name: postgres-server\n    ports:\n      - 5432:5432\n    environment:\n      POSTGRES_USER: myuser\n      POSTGRES_PASSWORD: mypassword\n      POSTGRES_DB: mydatabase\n\n  data-generator:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: data-generator\n    depends_on:\n      - postgres-server\n    command: ["postgres-server"]\n')),(0,r.kt)("p",null,"\uc774\uc81c \uc791\uc131\ud55c Compose \ud30c\uc77c\uc744 \uc2e4\ud589\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","Compose \ud30c\uc77c\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"up")," \uba85\ub839\uc5b4\uc640 ",(0,r.kt)("inlineCode",{parentName:"p"},"down")," \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc2e4\ud589\uacfc \uc885\ub8cc\ub97c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker compose up -d\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"-d")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Detached \ubaa8\ub4dc\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4. Detached \ubaa8\ub4dc\ub780, \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589 \ud6c4 \uc720\uc9c0\uc2dc\ud0a4\ub294 \ubaa8\ub4dc\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4."))))),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc ",(0,r.kt)("inlineCode",{parentName:"p"},"docker ps")," \ub97c \uc785\ub825\ud574\ubcf4\uba74 postgres server \ub9cc \ub744\uc6cc\uc838\uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\ud558\ub4dc\uc6e8\uc5b4 \uc2a4\ud399\uc5d0 \ub530\ub77c \ub530\ub77c \ud574\ub2f9 \ub0b4\uc6a9\uc774 \uc7ac\ud604\uc774 \uc548 \ub418\ub294 \uacbd\uc6b0\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc7ac\ud604\uc774 \uc548\ub418\ub294 \uacbd\uc6b0, \uc804\uccb4 \ud750\ub984\uc5d0 \ucd08\uc810\uc744 \ub9de\ucdb0\uc11c \ubd10\uc8fc\uc2dc\uba74 \ub420 \uac83 \uac19\uc2b5\ub2c8\ub2e4.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\ndocker ps\nCONTAINER ID   IMAGE           COMMAND                  CREATED              STATUS              PORTS                    NAMES\n8a4a16837f28   postgres:14.0   "docker-entrypoint.s\u2026"   About a minute ago   Up About a minute   0.0.0.0:5432->5432/tcp   postgres-server\n')),(0,r.kt)("p",null,"Docker desktop \uc73c\ub85c \ubd10\ub3c4 \ub3d9\uc77c\ud55c \ud604\uc0c1\uc785\ub2c8\ub2e4."),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Container Networking Connetected",src:a(5464).Z,width:"1962",height:"426"}),(0,r.kt)("br",{parentName:"p"}),"\n","[\uadf8\ub9bc 1-5]"," Docker Desktop")),(0,r.kt)("p",null,"\uc65c \uc774\ub7f4\uae4c\uc694?"),(0,r.kt)("p",null,"\uc774\uc720\ub294 \uc55e\uc11c ",(0,r.kt)("inlineCode",{parentName:"p"},"depends_on")," \uc73c\ub85c \uc11c\ube44\uc2a4 \uac04\uc758 \uc885\uc18d\uc131\uc740 \uc815\ud588\uc9c0\ub9cc, \uc2e4\uc81c\ub85c postgres server \uac00 \ub744\uc6cc\uc9c4 \ub4a4\uc5d0 \uace7\ubc14\ub85c Data Generator \uac00 \ub744\uc6cc\uc9d1\ub2c8\ub2e4.\nPostgres server \ub294 \uc544\uc9c1 \uc900\ube44\uac00 \ub418\uc5b4\uc788\uc9c0 \uc54a\uc740\ub370 Data Generator \uac00 \ub744\uc6cc\uc838\uc11c DB \uc5d0 \uc5f0\uacb0\uc744 \ud558\ub824\ub2e4\ubcf4\ub2c8 Data Generator \uac00 Exited \ub418\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ub530\ub77c\uc11c postgres server \uac00 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc0c1\ud0dc\uac00 \ub418\uc5b4\uc788\ub294\uc9c0 \uccb4\ud06c\ub97c \ud55c \ub4a4\uc5d0 Data Generator \ub97c \ub744\uc6cc\uc57c \ud569\ub2c8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c \ubc29\ubc95\uc73c\ub85c ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/peter-evans/docker-compose-healthcheck"},"Docker Compose Healthcheck")," \uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uac04\ub2e8\ud558\uac8c \uc544\ub798\uc640 \uac19\uc774 yaml \ud30c\uc77c\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"p"},"healthcheck")," \ubd80\ubd84\uacfc ",(0,r.kt)("inlineCode",{parentName:"p"},"condition")," \uc744 \ucd94\uac00\ud558\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},'version: "3"\n\nservices:\n  postgres-server:\n    image: postgres:14.0\n    container_name: postgres-server\n    ports:\n      - 5432:5432\n    environment:\n      POSTGRES_USER: myuser\n      POSTGRES_PASSWORD: mypassword\n      POSTGRES_DB: mydatabase\n    healthcheck:\n      test: ["CMD", "pg_isready", "-q", "-U", "myuser", "-d", "mydatabase"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  data-generator:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: data-generator\n    depends_on:\n      postgres-server:\n        condition: service_healthy\n    command: ["postgres-server"]\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"test")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\ud14c\uc2a4\ud2b8 \ud560 \uba85\ub839\uc5b4\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774\ubc88 \ucc55\ud130\uc5d0\uc11c\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"pg_isready")," \ub97c \uc774\uc6a9\ud558\uc5ec DB \uac00 \uc900\ube44\uc0c1\ud0dc\uc778\uc9c0 \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589\ud558\uae30 \ub54c\ubb38\uc5d0 ",(0,r.kt)("code",null,'["CMD", "pg_isready", "-q", "-U", "myuser", "-d", "mydatabase"]')," \ub97c \uc785\ub825\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"interval")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Healthcheck \uac04\uaca9\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774\ubc88 \ucc55\ud130\uc5d0\uc11c\ub294 10\ucd08\ub85c \uc124\uc815\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"timeout")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Healthcheck \uc758 timeout \uc744 \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774\ubc88 \ucc55\ud130\uc5d0\uc11c\ub294 5\ucd08\ub85c \uc124\uc815\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"retries")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Timeout \uc758 \ud69f\uc218\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774\ubc88 \ucc55\ud130\uc5d0\uc11c\ub294 5\ubc88\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"condition")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Healthcheck \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 ",(0,r.kt)("var",null,"depends_on")," \uc758 parameter \ub85c ",(0,r.kt)("code",null,"condition: service_healthy")," \ub97c \ub123\uc5b4\uc90d\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"Postgres server \uc758 healthcheck \ub97c Data Generator \uc5d0\uc11c \uc801\uc6a9\uc2dc\ud0a4\uae30 \uc704\ud574 ",(0,r.kt)("inlineCode",{parentName:"li"},"postgres-server")," \ubc11\uc5d0 condition \uc744 \ucd94\uac00\ud558\uc600\uc2b5\ub2c8\ub2e4."))))),(0,r.kt)("p",null,"\uc774\ub807\uac8c \uc124\uc815\ub41c \uac83\uc744 \uc885\ud569\ud574\ubcf4\uba74, 10\ucd08\ub9c8\ub2e4 \ud14c\uc2a4\ud2b8\ub97c \uc2e4\ud589\ud588\uc744 \ub54c 5\ucd08 \uc774\ub0b4\uc5d0 DB \uac00 \uc900\ube44 \uc0c1\ud0dc\uac00 \ub418\uc5c8\ub294\uc9c0\ub97c \uccb4\ud06c\ud560 \uac83\uc774\uba70, \uc2e4\ud328 \uc2dc 5\ubc88 \uc7ac\uc2dc\ub3c4\ud55c\ub2e4\ub294 \ub73b\uc774 \ub429\ub2c8\ub2e4.\n\uc774\uc678\uc5d0 \ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/builder/#healthcheck"},"Dockerfile Reference")," \uc744 \ucc38\uace0\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc774\uc81c \ub2e4\uc2dc \uc11c\ube44\uc2a4\ub4e4\uc744 \uc2e4\ud589\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker compose up -d\n")),(0,r.kt)("p",null,"\ubb38\uc81c\uc5c6\uc774 \uc798 \uc2e4\ud589\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"24-docker-compose-network"},"2.4 Docker Compose Network"),(0,r.kt)("h4",{id:"241-default-network"},"2.4.1 Default Network"),(0,r.kt)(s.W,{mdxType:"Chapter"}," 5) Data Generator on Docker")," \ucc55\ud130\uc5d0\uc11c \ucee8\ud14c\uc774\ub108\ub4e4\ub07c\ub9ac \ub124\ud2b8\uc6cc\ud06c\ub97c \uc5f0\uacb0\ud558\ub294 \ubd80\ubd84\uc744 \uc124\uba85\ud588\uc5c8\uc2b5\ub2c8\ub2e4. \uc704\uc758 \uc11c\ube44\uc2a4\ub97c \uc2e4\ud589\ud55c \ud6c4 \uc0dd\uc131\ub41c \ub124\ud2b8\uc6cc\ud06c\ub97c \ud655\uc778\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker network ls\n")),(0,r.kt)("p",null,"\uc2e4\ud589\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 ",(0,r.kt)("inlineCode",{parentName:"p"},"ch1_default")," \ub77c\ub294 \uc774\ub984\uc758 \ub124\ud2b8\uc6cc\ud06c\uac00 \uc0dd\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"NETWORK ID     NAME          DRIVER    SCOPE\nd2a7834f5caa   bridge        bridge    local\nd7d45bd4c3b7   ch1_default   bridge    local\n0d5dc37e7a9d   host          host      local\n703a7cd222a5   none          null      local\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ch1_default")," \ub97c \ud655\uc778\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker network inspect ch1_default\n")),(0,r.kt)("p",null,"\ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc790\ub3d9\uc73c\ub85c ",(0,r.kt)("inlineCode",{parentName:"p"},"postgres-server")," \uc640 ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \ucee8\ud14c\uc774\ub108\uac00 \ucd94\uac00\ub41c \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'[\n    {\n        "Name": "ch1_default",\n        ...\n        "ConfigOnly": false,\n        "Containers": {\n            "4043d0d2df3673a5fac77945bb7746e1af4b352fb7617891de0b22357a877c59": {\n                "Name": "postgres-server",\n                ...\n            },\n            "4ffdc089e4a40727645a0cab1952c025cdd583031f3ce7867761305ead2a6d63": {\n                "Name": "data-generator",\n                ...\n            }\n        ...\n    }\n]\n')),(0,r.kt)("p",null,"\uc774\ucc98\ub7fc Compose \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud558\uba74 \ub124\ud2b8\uc6cc\ud06c\uc5d0 \ub300\ud574\uc11c \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uace0 \ud3b8\ub9ac\ud558\uac8c \ucee8\ud14c\uc774\ub108\ub4e4\uc744 \uc5f0\uacb0\ud574\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("h4",{id:"242-custom-network"},"2.4.2 Custom Network"),(0,r.kt)("p",null,"\ub124\ud2b8\uc6cc\ud06c\uc758 \uc774\ub984\uc740 \ud2b9\ubcc4\ud788 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"{\ub514\ub809\ud1a0\ub9ac\uba85}_default")," \ub85c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\uc774 \ub429\ub2c8\ub2e4.\n\uadf8\ub807\uae30 \ub54c\ubb38\uc5d0 \uc11c\ub85c \uac19\uc740 \ub514\ub809\ud1a0\ub9ac\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0 \ub124\ud2b8\uc6cc\ud06c\uc758 \uc774\ub984\uc774 \ubcc0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc55e\uc73c\ub85c \uc774\uc5b4\uc9c0\ub294 \ud30c\ud2b8\uc5d0\uc11c\ub294 \uc11c\ub85c \ub124\ud2b8\uc6cc\ud06c\uc758 \uc5f0\uacb0\uc774 \ud544\uc694\ud558\uae30 \ub54c\ubb38\uc5d0 \uc774\ub984\uc744 \uc9c0\uc815\ud574\uc11c \uc0dd\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uba3c\uc800 \uc2e4\ud589\ud55c \uc11c\ube44\uc2a4\ub4e4\uc744 \uc885\ub8cc\ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose down -v\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"-v")," :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc0dd\uc131\ub41c \ubcfc\ub968\uae4c\uc9c0 \uc0ad\uc81c\ud569\ub2c8\ub2e4."))))),(0,r.kt)("p",null,"\ub124\ud2b8\uc6cc\ud06c \uc0dd\uc131\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"services")," \uc640 \uac19\uc740 \ub808\ubca8\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"p"},"networks")," \ub97c \uc785\ub825\ud558\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},"networks:\n  default:\n    name: mlops-network\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"default")," : \uc11c\ube44\uc2a4 \uc804\uccb4\uc758 \uae30\ubcf8 \ub124\ud2b8\uc6cc\ud06c\ub97c \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("var",null,"name")," : \ub124\ud2b8\uc6cc\ud06c\uc758 \uc774\ub984\uc744 \uc791\uc131\ud569\ub2c8\ub2e4. \uc55e\uc73c\ub85c \uc774\uc5b4\uc9c0\ub294 \ud30c\ud2b8\uc5d0\uc11c\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d ",(0,r.kt)("code",null,"mlops-network")," \ub85c \uc791\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4."))))),(0,r.kt)("h4",{id:"243-\uc2e4\ud589"},"2.4.3 \uc2e4\ud589"),(0,r.kt)("p",null,"\ub124\ud2b8\uc6cc\ud06c\uae4c\uc9c0 \uc791\uc131\ud55c \ucd5c\uc885 Compose \ud30c\uc77c\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="docker-compose.yaml"',title:'"docker-compose.yaml"'},'version: "3"\n\nservices:\n  postgres-server:\n    image: postgres:14.0\n    container_name: postgres-server\n    ports:\n      - 5432:5432\n    environment:\n      POSTGRES_USER: myuser\n      POSTGRES_PASSWORD: mypassword\n      POSTGRES_DB: mydatabase\n    healthcheck:\n      test: ["CMD", "pg_isready", "-q", "-U", "myuser", "-d", "mydatabase"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  data-generator:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: data-generator\n    depends_on:\n      postgres-server:\n        condition: service_healthy\n    command: ["postgres-server"]\n\nnetworks:\n  default:\n    name: mlops-network\n\n')),(0,r.kt)("p",null,"\ub2e4\uc2dc ",(0,r.kt)("inlineCode",{parentName:"p"},"docker compose")," \ub97c \uc2e4\ud589\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker compose up -d\n")),(0,r.kt)("p",null,"\uc2e4\ud589 \ud6c4 \ub124\ud2b8\uc6cc\ud06c\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker network ls\n")),(0,r.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc774 ",(0,r.kt)("inlineCode",{parentName:"p"},"mlops-network")," \uac00 \ucd94\uac00\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"NETWORK ID     NAME            DRIVER    SCOPE\nd2a7834f5caa   bridge          bridge    local\n0d5dc37e7a9d   host            host      local\ne9671c141955   mlops-network   bridge    local\n703a7cd222a5   none            null      local\n")),(0,r.kt)("h2",{id:"3-\ub370\uc774\ud130-\ud655\uc778"},"3. \ub370\uc774\ud130 \ud655\uc778"),(0,r.kt)("h3",{id:"31-in-local"},"3.1 In Local"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"psql")," \uc744 \uc774\uc6a9\ud558\uc5ec DB \uc5d0 \uc811\uc18d\ud558\uace0, \uacc4\uc18d\ud574\uc11c \ub370\uc774\ud130\uac00 \uc0bd\uc785\ub418\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\nPGPASSWORD=mypassword psql -h localhost -p 5432 -U myuser -d mydatabase\npsql (14.3, server 14.0 (Debian 14.0-1.pgdg110+1))\nType "help" for help.\n\nmydatabase=# select * from iris_data;\n id | sepal_length | sepal_width | petal_length | petal_width | target \n----+--------------+-------------+--------------+-------------+--------\n  1 |            6 |         2.9 |          4.5 |         1.5 |      1\n  2 |          6.9 |         3.1 |          5.4 |         2.1 |      2\n  3 |          5.1 |         3.7 |          1.5 |         0.4 |      0\n  4 |          6.3 |         2.7 |          4.9 |         1.8 |      2\n  5 |          4.4 |         2.9 |          1.4 |         0.2 |      0\n  6 |          4.7 |         3.2 |          1.3 |         0.2 |      0\n')),(0,r.kt)("h3",{id:"32-in-data-generator-container"},"3.2 In Data Generator Container"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"docker exec")," \ub97c \uc774\uc6a9\ud558\uc5ec Data Generator \ucee8\ud14c\uc774\ub108 \uc548\uc73c\ub85c \uc811\uc18d\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker exec -it data-generator /bin/bash\n")),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,r.kt)("inlineCode",{parentName:"p"},"psql")," \uc744 \uc774\uc6a9\ud558\uc5ec DB \ub85c \uc811\uc18d\ud569\ub2c8\ub2e4.\n\uc774 \ub54c local \uc774 \uc544\ub2cc Data Generator \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc811\uc18d\ud574\uc57c \ud558\uae30 \ub54c\ubb38\uc5d0 \ud638\uc2a4\ud2b8\ub97c ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost")," \uc5d0\uc11c ",(0,r.kt)("inlineCode",{parentName:"p"},"postgres-server")," \ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\nPGPASSWORD=mypassword psql -h postgres-server -p 5432 -U myuser -d mydatabase\npsql (13.8 (Debian 13.8-0+deb11u1), server 14.0 (Debian 14.0-1.pgdg110+1))\nWARNING: psql major version 13, server major version 14.\n         Some psql features might not work.\nType "help" for help.\n\nmydatabase=# select * from iris_data;\n id | sepal_length | sepal_width | petal_length | petal_width | target \n----+--------------+-------------+--------------+-------------+--------\n  1 |            6 |         2.9 |          4.5 |         1.5 |      1\n  2 |          6.9 |         3.1 |          5.4 |         2.1 |      2\n  3 |          5.1 |         3.7 |          1.5 |         0.4 |      0\n  4 |          6.3 |         2.7 |          4.9 |         1.8 |      2\n  5 |          4.4 |         2.9 |          1.4 |         0.2 |      0\n  6 |          4.7 |         3.2 |          1.3 |         0.2 |      0\n')))}g.isMDXComponent=!0},5464:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/db-5-e81c25b4acc7c26b0bf4334a8c0804e1.png"}}]);