---
sidebar_position: 5
description: ğŸ“Œ Docker ë¥¼ ì´ìš©í•˜ì—¬ data generator ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ `Dockerfile` ì„ ì‘ì„±í•©ë‹ˆë‹¤.
---

# 5) Data Generator on Docker
import CodeDescription from '@site/src/components/CodeDescription';
import BrowserWindow from '@site/src/components/BrowserWindow';
import { Chapter, Part } from '@site/src/components/Highlight';

### ëª©í‘œ

1. Docker ë¥¼ ì´ìš©í•˜ì—¬ data generator ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ `Dockerfile` ì„ ì‘ì„±í•©ë‹ˆë‹¤.
2. DB ì•ˆì— ë°ì´í„°ê°€ ê³„ì†í•´ì„œ ì‚½ì…ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

<details>
<summary>ìŠ¤í™ ëª…ì„¸ì„œ</summary>
<CodeDescription>

### ìŠ¤í™ ëª…ì„¸ì„œ

1.  <Chapter>4) Data Insertion Loop</Chapter> ì±•í„°ì—ì„œ ì‘ì„±í•œ script ë¥¼ build í•  ìˆ˜ ìˆëŠ” <code>Dockerfile</code> ì„ ì‘ì„±í•©ë‹ˆë‹¤.

    - Base image ëŠ” `amd64/python:3.9-slim` ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - ì»¨í…Œì´ë„ˆì—ì„œ `psql` ì„ ì´ìš©í•˜ì—¬ DB ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ `postgresql-client` ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
2. <code>psql</code> ì„ ì´ìš©í•˜ì—¬ DB ì— ë°ì´í„°ê°€ ê³„ì†í•´ì„œ ìŒ“ì´ê³  ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

    - Local ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.
    - Data generator ì„œë²„ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.

</CodeDescription>
</details>

---

<BrowserWindow url="https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch1">

í•´ë‹¹ íŒŒíŠ¸ì˜ ì „ì²´ ì½”ë“œëŠ” [mlops-for-mle/ch1/](https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch1) ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
ch1
// highlight-next-line
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ Makefile
â”œâ”€â”€ create_table.py
// highlight-next-line
â”œâ”€â”€ data_generator.py
â”œâ”€â”€ docker-compose.yaml
â”œâ”€â”€ insert_data.py
â””â”€â”€ insert_data_loop.py
```

</BrowserWindow>

## 1. Data Generator

### 1.1 `data_generator.py`

 <Chapter>4) Data Insertion Loop</Chapter> ì±•í„°ì—ì„œ ì‘ì„±í•œ ì½”ë“œë“¤ì„ ëª¨ì•„ì„œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” <code>data_generator.py</code> ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```python  title="data_generator.py"
# data_generator.py
import time
from argparse import ArgumentParser

import pandas as pd
import psycopg2
from sklearn.datasets import load_iris


def get_data():
    X, y = load_iris(return_X_y=True, as_frame=True)
    df = pd.concat([X, y], axis="columns")
    rename_rule = {
        "sepal length (cm)": "sepal_length",
        "sepal width (cm)": "sepal_width",
        "petal length (cm)": "petal_length",
        "petal width (cm)": "petal_width",
    }
    df = df.rename(columns=rename_rule)
    return df


def create_table(db_connect):
    create_table_query = """
    CREATE TABLE IF NOT EXISTS iris_data (
        id SERIAL PRIMARY KEY,
        sepal_length float8,
        sepal_width float8,
        petal_length float8,
        petal_width float8,
        target int
    );"""
    print(create_table_query)
    with db_connect.cursor() as cur:
        cur.execute(create_table_query)
        db_connect.commit()


def insert_data(db_connect, data):
    insert_row_query = f"""
    INSERT INTO iris_data
        (sepal_length, sepal_width, petal_length, petal_width, target)
        VALUES (
            {data.sepal_length},
            {data.sepal_width},
            {data.petal_length},
            {data.petal_width},
            {data.target}
        );
    """
    print(insert_row_query)
    with db_connect.cursor() as cur:
        cur.execute(insert_row_query)
        db_connect.commit()


def generate_data(db_connect, df):
    while True:
        insert_data(db_connect, df.sample(1).squeeze())
        time.sleep(1)


if __name__ == "__main__":
    parser = ArgumentParser()
    parser.add_argument("--db-host", dest="db_host", type=str, default="localhost")
    args = parser.parse_args()

    db_connect = psycopg2.connect(
        user="myuser",
        password="mypassword",
        host=args.db_host,
        port=5432,
        database="mydatabase",
    )
    create_table(db_connect)
    df = get_data()
    generate_data(db_connect, df)
```

ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

1. DB ì— ì—°ê²°í•˜ëŠ” connector ìƒì„±  
    Connector ë¥¼ ìƒì„±í•  ë•Œ <Chapter>4) Data Insertion Loop</Chapter> ì±•í„°ì—ì„œ ì‘ì„±í•œ ë‚´ìš©ê³¼ëŠ” ë‹¤ë¥´ê²Œ `host` ë¥¼ ë°›ëŠ” ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ `ArgumentParser` ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

    ```python
    parser = ArgumentParser()
    parser.add_argument("--db-host", dest="db_host", type=str, default="localhost")
    args = parser.parse_args()
    ```
    ì´ì™€ ê´€ë ¨í•´ì„œëŠ” ë’¤ì—ì„œ ì„¤ëª…í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
2. ì—°ê²°ëœ DB ì— <var>`iris_data`</var> í…Œì´ë¸”ì„ ìƒì„±
3. Iris ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
4. ë¶ˆëŸ¬ì˜¨ ë°ì´í„° ì¤‘ í•˜ë‚˜ë¥¼ DB ì— ì‚½ì…

### 1.2 Dockerfile ì‘ì„±

#### 1.2.1 Dockerfile

`Dockerfile` ì„ ì´ìš©í•˜ì—¬ ìœ„ì—ì„œ ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. 

<CodeDescription>

```docker title="Dockerfile"
FROM amd64/python:3.9-slim

RUN apt-get update && apt-get install -y postgresql-client

WORKDIR /usr/app

RUN pip install -U pip &&\
    pip install scikit-learn pandas psycopg2-binary

COPY data_generator.py data_generator.py

ENTRYPOINT ["python", "data_generator.py", "--db-host"]
# Change CMD to solve host finding error
CMD ["localhost"]
```

- `FROM` : ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ë•Œ base ê°€ ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” `amd64/python:3.9-slim` ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
- `RUN` : ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ `RUN` ì—ì„œëŠ” í•´ë‹¹ Dockerfile ì„ ì´ìš©í•˜ì—¬ data generator ì„œë²„ë¥¼ ë„ìš¸ ë•Œ, ì»¨í…Œì´ë„ˆ ì•ˆì— ì ‘ê·¼í•˜ì—¬ `psql`ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `postgresql-client` ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ë‘ ë²ˆì§¸ `RUN` ì—ì„œëŠ” ì»¨í…Œì´ë„ˆì—ì„œ python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ í•„ìš”í•œ `scikit-learn`, `pandas`, `psycopg2-binary`ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
- `WORKDIR` : ì‘ì—… directory ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. í•´ë‹¹ directory ê°€ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì‘ì—… directory ë¥¼ ì§€ì •í•˜ë©´ ê·¸ ì´í›„ ëª…ë ¹ì–´ëŠ” í•´ë‹¹ directory ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
- `COPY` : íŒŒì¼ì´ë‚˜ í´ë”ë¥¼ ì´ë¯¸ì§€ì— ë³µì‚¬í•©ë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í•  ê²½ìš°, `WORKDIR` ë¡œ ì§€ì •í•œ directory ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ ì•ì„œ ì‘ì„±í•œ `data_generator.py`ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.
- `ENTRYPOINT` : ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë  ë•Œ ì‹œì‘í•  í”„ë¡œì„¸ìŠ¤ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
- `CMD` : ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë  ë•Œ `ENTRYPOINT` ì— ì „ë‹¬í•  arguments ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

</CodeDescription>

#### 1.2.2 Build

ì´ì œ ìœ„ì—ì„œ ì‘ì„±í•œ `Dockerfile` ì„ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ build í•´ë³´ê² ìŠµë‹ˆë‹¤.

ì´ë¯¸ì§€ë¥¼ build í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ ê·œì¹™ì„ ë”°ë¥´ë©´ ë©ë‹ˆë‹¤. ì´ì™€ ê´€ë ¨í•œ ìì„¸í•œ ë‚´ìš©ì€ [ê³µì‹ í™ˆí˜ì´ì§€](https://docs.docker.com/engine/reference/commandline/build/)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

```bash
# terminal-command
docker build [OPTIONS] PATH | URL | -
```

ì´ë¯¸ì§€ ì´ë¦„ì€ `data-generator` ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.

```bash
# terminal-command
docker build . -t data-generator
```

ì´ë¯¸ì§€ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```bash
# terminal-command
docker image ls
```

ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ `data-generator` ê°€ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# terminal-command
docker image ls
REPOSITORY                  TAG       IMAGE ID       CREATED         SIZE
data-generator         latest    96d8fa213c74   5 hours ago     635MB
```

#### 1.2.3 Run

ì´ì œ build í•œ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```bash
# terminal-command
docker run data-generator
```

ì‹¤í–‰í•  ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì—ëŸ¬ ë©”ì„¸ì§€ì™€ í•¨ê»˜ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë©ë‹ˆë‹¤.

```bash
# terminal-command
docker run data-generator
Traceback (most recent call last):
  File "/usr/app/create_table.py", line 26, in <module>
    db_connect = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused
        Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (::1), port 5432 failed: Cannot assign requested address
        Is the server running on that host and accepting TCP/IP connections?
```

í•´ë‹¹ ì—ëŸ¬ëŠ” `localhost:5432` ê°€ ì‘ë‹µí•˜ì§€ ì•Šê³  ìˆë‹¤ëŠ” ì—ëŸ¬ì…ë‹ˆë‹¤.

í•´ë‹¹ ë©”ì„¸ì§€ë¥¼ ì½ê³  ë‚˜ë©´ ì œì¼ ì²˜ìŒ í™•ì¸í•´ ë´ì•¼ í•  ë¶€ë¶„ì€ DB ì»¨í…Œì´ë„ˆê°€ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ì—¬ë¶€ì…ë‹ˆë‹¤.

```bash
# terminal-command
docker ps
```

ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ë³´ë©´ í˜„ì¬ DB ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# terminal-command
docker ps
CONTAINER ID   IMAGE           COMMAND                  CREATED         STATUS         PORTS                    NAMES
26eeee50afc6   postgres:14.0   "docker-entrypoint.sâ€¦"   3 seconds ago   Up 2 seconds   0.0.0.0:5432->5432/tcp   postres-server
```

ë¡œì»¬ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.
ê·¸ëŸ¼ ì™œ `data-generator` ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ì»¨í…Œì´ë„ˆì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ê³  ë‚˜ì˜¬ê¹Œìš”? ì´ë¥¼ ìœ„í•´ì„œëŠ” docker ì˜ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ì„œ ì´í•´í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

## 2. Docker Network

### 2.1 Localhost

ë¡œì»¬ì—ì„œëŠ” ì–´ë–»ê²Œ DB ì»¨í…Œì´ë„ˆì— ì ‘ê·¼ì´ ê°€ëŠ¥í–ˆì„ê¹Œìš”?

<div style={{textAlign: 'center'}}>

![Localhost Networking](./img/db-2.png)  
[ê·¸ë¦¼ 1-2] Localhost Networking
</div>

[ê·¸ë¦¼ 1-2] ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ë„ìš´ ë°ìŠ¤í¬íƒ‘ê³¼ ì»¨í…Œì´ë„ˆì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ ê·¸ë¦¼ì…ë‹ˆë‹¤.  <Chapter>1) DB Server Creation</Chapter> ì±•í„°ì—ì„œ DB ì»¨í…Œì´ë„ˆë¥¼ ë„ìš¸ ë•Œ ì‚¬ìš©í•œ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```bash
# terminal-command
docker run -d \
	...
  -p 5432:5432 \
  postgres:14.0
```

ì´ ë•Œ `-p` ì˜µì…˜ì€ í¬íŠ¸ í¬ì›Œë”©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ìœ„ì˜ `5432:5432` ë¥¼ í•´ì„í•˜ë©´ DB ì»¨í…Œì´ë„ˆì˜ `5432` í¬íŠ¸ë¥¼ localhost ì˜ `5432` í¬íŠ¸ë¡œ ì—°ê²°í•˜ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.  
ì¦‰, `localhost:5432` ì— ëŒ€í•œ ì ‘ê·¼ì€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ `5432` í¬íŠ¸ì— ëŒ€í•œ ì ‘ê·¼ê³¼ ê°™ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì—°ê²°ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ë¡œì»¬ì—ì„œëŠ” DB ì— ì ‘ê·¼ì´ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.

<div style={{textAlign: 'center'}}>

![Container Networking Disconneted](./img/db-3.png)  
[ê·¸ë¦¼ 1-3] Container Networking Disconneted
</div>

[ê·¸ë¦¼ 1-3] ëŠ” data generator ì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œì¼°ì„ ë•Œì˜ ë„ì‹ì…ë‹ˆë‹¤.
ì´ ë•Œ data generator ì»¨í…Œì´ë„ˆ ì…ì¥ì—ì„œ `localhost:5432` ëŠ” ì•„ë¬´ê²ƒë„ ì—´ë ¤ìˆì§€ ì•Šì€ ë¹„ì–´ìˆëŠ” í¬íŠ¸ì…ë‹ˆë‹¤.
ê·¸ë ‡ê¸° ë•Œë¬¸ì— DB ë¥¼ ì°¾ì§€ ëª»í•œë‹¤ëŠ” ì—ëŸ¬ì™€ í•¨ê»˜ ì¢…ë£Œë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

<div style={{textAlign: 'center'}}>

![Container Networking Connetected](./img/db-4.png)  
[ê·¸ë¦¼ 1-4] Container Networking Connetected
</div>

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” [ê·¸ë¦¼ 1-4] ì²˜ëŸ¼ ë‘ ì»¨í…Œì´ë„ˆ ê°„ì— í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì—°ê²°í•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

### 2.2 Connect Network
ë‘ ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°ì‹œí‚¤ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ docker network ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. ìš°ì„ , ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    
    ```bash
    # terminal-command
    docker network create my-network
    ```
    
2. ì‹¤í–‰ ì¤‘ì¸ DB ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•œ ë„ì»¤ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•©ë‹ˆë‹¤.
    
    ```bash
    # terminal-command
    docker network connect my-network postgres-server
    ```
    
3. ì´ì œ ë‹¤ì‹œ `data-generator` ì´ë¯¸ì§€ë¥¼ ì´ìš©í•˜ì—¬ `data-generator` ë¼ëŠ” ì´ë¦„ì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
    <CodeDescription>

    ```bash
    # terminal-command
    docker run --name data-generator --network "my-network" data-generator "postgres-server"
    ```
    
    - `--network` ì˜µì…˜ì— ìœ„ì—ì„œ ìƒì„±í•œ ë„¤íŠ¸ì›Œí¬ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤.
    - ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•  ë•Œ ì´ë¯¸ì§€ ì´ë¦„ì˜ ë’¤ì— ì…ë ¥ëœ ê°’ì€ Dockerfile ì˜ `CMD` ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
        - ìœ„ì—ì„œ connector ë¥¼ ìƒì„±í•  ë•Œ host ë¥¼ ë°›ëŠ” ë¶€ë¶„ì„ ìˆ˜ì •í–ˆì—ˆëŠ”ë° ë°”ë¡œ ì´ ê²½ìš°ë¥¼ ìœ„í•´ì„œì…ë‹ˆë‹¤.
        ì»¨í…Œì´ë„ˆ ê°„ì˜ í†µì‹ ì„ í•˜ëŠ” ê²½ìš°ì—ëŠ” `localhost` ê°€ ì•„ë‹Œ ê° ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì´ host ê°€ ë©ë‹ˆë‹¤.
        ì´ ë•Œ ì•ì„œ ë„ìš´ DB ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì€ `postgres-server` ì´ê¸° ë•Œë¬¸ì— argument ë¡œ `postgres-server` ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

    </CodeDescription>

### 2.3 Data í™•ì¸

`psql` ì„ ì´ìš©í•˜ì—¬ DB ì— ì ‘ì†í•˜ê³ , ê³„ì†í•´ì„œ ë°ì´í„°ê°€ ì‚½ì…ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.

1. `psql` ì„ ì´ìš©í•˜ì—¬ DB ì— ì ‘ì†í•©ë‹ˆë‹¤.
    
    ```bash
    # terminal-command
    psql -h localhost -p 5432 -U myuser -d mydatabase
    Password for user myuser: 
    psql (14.3, server 14.0 (Debian 14.0-1.pgdg110+1))
    Type "help" for help.
    
    mydatabase=#
    ```
    
2.  <Chapter>3) Data Insertion</Chapter> ì±•í„°ì—ì„œ ì‘ì„±í•œ <var><code>iris_data</code></var> í…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„° ì „ì²´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ query ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
    
    ```bash
    # terminal-command
    mydatabase=# select * from iris_data;
     id | sepal_length | sepal_width | petal_length | petal_width | target 
    ----+--------------+-------------+--------------+-------------+--------
      1 |          5.6 |           3 |          4.5 |         1.5 |      1
      2 |          5.9 |           3 |          5.1 |         1.8 |      2
      3 |          5.5 |         2.4 |          3.8 |         1.1 |      1
      4 |          5.4 |         3.9 |          1.3 |         0.4 |      0
    (4 rows)
    ```
    
    ê³„ì†í•´ì„œ ë°ì´í„°ê°€ ì¶”ê°€ë˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## 3. í•œê³„

ë‹¤ë§Œ ì´ ë°©ë²•ì€ ì—¬ëŸ¬ ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤.

ìš°ì„  í†µì‹ ì„ ìœ„í•´ì„œëŠ” ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ì„œë¡œ ì—°ê²°ì´ í•„ìš”í•œ ì»¨í…Œì´ë„ˆì—ê²Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì„ ì „ë‹¬í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
ì´ë¦„ì„ ì§€ì •í•´ ì–´ëŠì •ë„ í•´ì†Œí•  ìˆ˜ ìˆìœ¼ë‚˜ ì»¨í…Œì´ë„ˆê°€ ì˜ˆìƒí•˜ì§€ ëª»í•œ ì´ìœ ë¡œ ì¢…ë£Œë  ê²½ìš° ì‚¬ìš©ëœ ì´ë¦„ì„ ì ìœ í•˜ê³  ìˆì–´ì„œ ë‹¤ì‹œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì¢…ë£Œëœ ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤.

ë˜í•œ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œë¥¼ ë³´ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ DB ì„œë²„ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— data generator ì„œë²„ì—ì„œ ë°ì´í„° ì‚½ì…ì„ ì‹œë„í•˜ë©´ í•´ë‹¹ ì»¨í…Œì´ë„ˆëŠ” ì˜¤ë¥˜ì™€ í•¨ê»˜ ì‹¤í–‰ì´ ì¢…ë£Œë©ë‹ˆë‹¤.

ì´ì²˜ëŸ¼ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ê°„ì˜ ì‘ì—…ì„ ì¡°ìœ¨í•˜ëŠ” ê²ƒì„ **Container Orchestration** ì´ë¼ê³  í•˜ë©° ë„ì»¤ì—ì„œëŠ” ìì²´ì ì¸ í•´ê²°ë²•ìœ¼ë¡œ [Docker Compose](https://docs.docker.com/compose/) ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
