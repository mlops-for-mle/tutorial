<!doctype html>
<html lang="kr" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-kafka/kafka-introduction">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">1) Kafka Introduction | ML Engineer를 위한 MLOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://mlops-for-mle.github.io/tutorial/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://mlops-for-mle.github.io/tutorial/img/logo.png"><meta data-rh="true" property="og:url" content="https://mlops-for-mle.github.io/tutorial/docs/kafka/kafka-introduction"><meta data-rh="true" name="docusaurus_locale" content="kr"><meta data-rh="true" name="docsearch:language" content="kr"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="1) Kafka Introduction | ML Engineer를 위한 MLOps"><meta data-rh="true" name="description" content="📌 메시징 시스템에 대해 알아봅니다."><meta data-rh="true" property="og:description" content="📌 메시징 시스템에 대해 알아봅니다."><link data-rh="true" rel="icon" href="/tutorial/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://mlops-for-mle.github.io/tutorial/docs/kafka/kafka-introduction"><link data-rh="true" rel="alternate" href="https://mlops-for-mle.github.io/tutorial/docs/kafka/kafka-introduction" hreflang="kr"><link data-rh="true" rel="alternate" href="https://mlops-for-mle.github.io/tutorial/docs/kafka/kafka-introduction" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6GP6CF368Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6GP6CF368Q",{anonymize_ip:!0})</script><link rel="stylesheet" href="/tutorial/assets/css/styles.4f5310c6.css">
<link rel="preload" href="/tutorial/assets/js/runtime~main.ae2f8874.js" as="script">
<link rel="preload" href="/tutorial/assets/js/main.20a80eb8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tutorial/"><div class="navbar__logo"><img src="/tutorial/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/tutorial/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">MLOps for MLE</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/tutorial/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/tutorial/community/contributors">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mlops-for-mle/mlops-for-mle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Code GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/mlops-for-mle/tutorial" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Tutorial Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tutorial/docs/intro">00. Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tutorial/docs/category/01-database">01. Database</a><button aria-label="Toggle the collapsible sidebar category &#x27;01. Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tutorial/docs/category/02-model-development">02. Model Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;02. Model Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tutorial/docs/category/03-model-registry">03. Model Registry</a><button aria-label="Toggle the collapsible sidebar category &#x27;03. Model Registry&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tutorial/docs/model-deployment">04. Model Deployment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tutorial/docs/category/05-fastapi">05. FastAPI</a><button aria-label="Toggle the collapsible sidebar category &#x27;05. FastAPI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tutorial/docs/category/06-api-serving">06. API Serving</a><button aria-label="Toggle the collapsible sidebar category &#x27;06. API Serving&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/tutorial/docs/category/07-kafka">07. Kafka</a><button aria-label="Toggle the collapsible sidebar category &#x27;07. Kafka&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorial/docs/kafka/overview">0) Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tutorial/docs/kafka/kafka-introduction">1) Kafka Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorial/docs/kafka/producer-consumer">2) Producer &amp; Consumer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorial/docs/kafka/connect-connector">3) Connect &amp; Connector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorial/docs/kafka/kafka-system">4) Kafka System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorial/docs/kafka/source-connector">5) Source Connector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorial/docs/kafka/sink-connector">6) Sink Connector</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tutorial/docs/category/08-stream">08. Stream</a><button aria-label="Toggle the collapsible sidebar category &#x27;08. Stream&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tutorial/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/tutorial/docs/category/07-kafka"><span itemprop="name">07. Kafka</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">1) Kafka Introduction</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>1) Kafka Introduction</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="목표">목표<a class="hash-link" href="#목표" title="Direct link to heading">​</a></h3><ol><li>메시징 시스템에 대해 알아봅니다.</li><li>Kafka 의 전체 아키텍처에 대해 알아봅니다.</li></ol><hr><div class="browserWindow_my1Q"><div class="browserWindowHeader_jXSR"><div class="buttons_uHc7"><span class="dot_giz1" style="background:#f25f58"></span><span class="dot_giz1" style="background:#fbbe3c"></span><span class="dot_giz1" style="background:#58cb42"></span></div><div class="browserWindowAddressBar_Pd8y text--truncate">https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch7</div><div class="browserWindowMenuIcon_Vhuh"><div><span class="bar_rrRL"></span><span class="bar_rrRL"></span><span class="bar_rrRL"></span></div></div></div><div class="browserWindowBody_Idgs"><p>해당 파트의 전체 코드는 <a href="https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch7" target="_blank" rel="noopener noreferrer">mlops-for-mle/ch7/</a> 에서 확인할 수 있습니다.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ch7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── </span><span class="token maybe-class-name">Makefile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── </span><span class="token constant" style="color:#36acaa">README</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── connect</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Dockerfile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── create_table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── kafka</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">docker</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">compose</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── naive</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">docker</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">compose</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sink_connector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── source_connector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── target</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">docker</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">compose</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Dockerfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-메시징-시스템">1. 메시징 시스템<a class="hash-link" href="#1-메시징-시스템" title="Direct link to heading">​</a></h2><div style="text-align:center"><p><img loading="lazy" alt="Single Messaging System" src="/tutorial/assets/images/kafka-2-b2324df5f69cf0a7c40f36a074150826.png" width="1878" height="600" class="img_ev3q">
<!-- -->[그림7-2]<!-- --> 단일 메시징 시스템</p></div><p><strong>메시징 시스템 (Message System)</strong> 이란 서로 다른 어플리케이션(Application) 끼리 정보를 교환하기 위해 메시지의 생성, 전송, 전달 및 저장을 가능하게 하는 시스템을 말합니다.</p><p>언제 이런 시스템을 이용할까요?<br>
<!-- -->주로 하나의 어플리케이션이 여러 외부 어플리케이션이나 하나 이상의 데이터 소스로부터 데이터를 받는 어플리케이션에 의해 처리된 데이터를 전달받고 싶을 때 사용합니다.
여기서 <strong>메시지</strong>란 하나의 entity 에서 다른 하나의 entity 로 정보를 전송하는 데 사용되는 통신 아티팩트입니다.</p><p>메시징 시스템에는 대표적으로 Kafka, RabbitMQ, Active MQ, AWS SQS, Java JMS 등이 있습니다.</p><p>왜 메시징 시스템을 사용할까요?
최근 들어 분산 어플리케이션이 급격히 증가하면서 단일로 사용하던 때에는 발생하지 않았던 동기화, 안정성, 확장성, 보안 등이 문제가 되기 시작했습니다.
이에 대한 한 가지 해결책은 <strong>메시지</strong>를 통해 각 컴포넌트 사이의 <strong>결합성(coupling)</strong> 을 약화시키는 것입니다. </p><div style="text-align:center"><p><img loading="lazy" alt="Multiple Messaging System" src="/tutorial/assets/images/kafka-3-a85b0be492cdc8edff700a85e0c4872d.png" width="1879" height="812" class="img_ev3q">
<!-- -->[그림7-3]<!-- --> 다중 메시징 시스템</p></div><p>메시징 시스템은 고전적인 분산 컴퓨팅 모델에 비해 여러 장점들을 제공합니다.</p><p>먼저, 메시징 시스템은 메시지 생산자(message producer) 와 메시지 소비자(message consumers) 사이에 <strong>약한 결합성(loose coupling)</strong> 을 갖도록 합니다.
약한 결합성이란 한 쪽이 끊기거나 변경이 있어도 다른 쪽에는 미치는 영향이 작은 것을 의미합니다.  </p><p>메시징 시스템에서는 약한 결합성을 어떻게 구현했을까요?<br>
<!-- -->메시징 시스템을 이용할 경우 메시지 생산자와 소비자는 서로를 알지 못합니다.
메시지 소비자에게 있어서, 그 메시지를 누가 생산했고 생선자가 어디에 있는지 또는 메시지가 언제 생산 되었는지의 여부는 중요하지 않게 됩니다.
이러한 메시징 시스템의 특징은 동적이고, 신뢰성 있고 유연한 시스템을 구현할 수 있도록 해주며, 그에 따라 시스템의 나머지 부분에 영향을 주지 않고 하위 어플리케이션의 전체적인 구성을 변경할 수 있습니다.</p><p>메시징 시스템의 또 다른 장점은 높은 <strong>확장성</strong>과 서로 다른 네트워크 사이의 쉬운 <strong>통합성</strong> 그리고 <strong>안정성</strong>입니다.<br>
<!-- -->메시징 시스템의 안정적이고 확장 가능한 특징 때문에, 많은 개발자들이 비지니스와 컴퓨팅 사이언스 문제를 해결하기 위해 사용하고 있습니다.
예를 들어, 메시징 시스템은 워크플로우, 네트워크 관리, 통신 서비스, 고객 관리, 일기 예보 시스템과 같은 다양한 어플리케이션의 기반이 되고 있습니다.
또한, 메시징 시스템은 통합이 필연적인 분리된 시스템들을 엮어주는 매개체의 역할도 하고 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-용어-정리">1.1 용어 정리<a class="hash-link" href="#11-용어-정리" title="Direct link to heading">​</a></h3><p>메시징 시스템에서 쓰이는 간단한 용어들을 살펴보겠습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="message-oriented-middleware-mom">Message Oriented Middleware (MOM)<a class="hash-link" href="#message-oriented-middleware-mom" title="Direct link to heading">​</a></h4><ul><li>독립된 애플리케이션 간에 데이터를 주고받을 수 있도록 하는 시스템 디자인<ul><li>함수 호출, 공유메모리 등의 방식이 아닌, 메시지 교환을 이용하는 중간 계층에 대한 인프라 아키텍처</li><li>분산 컴퓨팅이 가능해지며, 서비스간의 결합성이 낮아짐</li></ul></li><li>비동기(asynchronous) 로 메시지를 전달함</li><li>Queue, Broadcast, Multicast 등의 방식으로 메시지를 전달함</li><li>Publish/Subscribe (Pub/Sub) 구조<ul><li>메시지를 발행하는 Publisher (Producer), 메시지를 소비하는 Subscriber (Consumer) 로 구성</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="message-broker">Message Broker<a class="hash-link" href="#message-broker" title="Direct link to heading">​</a></h4><ul><li>메시지 처리 또는 메시지 수신자에게 메시지를 전달하는 시스템이며, 일반적으로 MOM 을 기반으로 구축됨</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="message-queue-mq">Message Queue (MQ)<a class="hash-link" href="#message-queue-mq" title="Direct link to heading">​</a></h4><ul><li>Message Broker 와 MOM 을 구현한 소프트웨어 (RabbitMQ, ActiveMQ, Kafka 등)</li><li>MOM 은 메시지 전송 보장을 해야하므로 AMQP 를 구현함</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-message-queueing-protocol-amqp">Advanced Message Queueing Protocol (AMQP)<a class="hash-link" href="#advanced-message-queueing-protocol-amqp" title="Direct link to heading">​</a></h4><ul><li>메시지를 안정적으로 주고받기 위한 인터넷 프로토콜</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka">Kafka<a class="hash-link" href="#kafka" title="Direct link to heading">​</a></h4><ul><li>뒤이어 살펴볼 Kafka 는 “AMQP 를 구현한 MOM 시스템” 이라고 볼 수 있습니다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-kafka">2. Kafka<a class="hash-link" href="#2-kafka" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-features">2.2 Features<a class="hash-link" href="#22-features" title="Direct link to heading">​</a></h3><p>Kafka 는 open-source distributed event streaming platform 입니다.<br>
<!-- -->여기서 <strong>event streaming</strong> 이란 데이터베이스, 센서, 모바일기기, 어플리케이션 등과 같은 곳에서 발생하는 데이터를 event stream 형태로 저장해서 나중에 검색할 수 있도록 하는 것을 말합니다.
다시 말해, 발생하는 데이터를 실시간으로 처리하고 필요에 따라서 데이터가 또 다른 서버 (target system)로 event stream 을 라우팅 해주는 것을 말합니다. </p><p>Kafka 의 주요 특징은 다음과 같습니다.</p><ol><li><strong>Event streaming platform</strong> : Event stream 을 실시간으로 처리하고 계속 쌓이는 데이터를 지속적으로 보관하다가 그 데이터를 쓰려고 하는 다른 target system 들이 가져갈 수 있도록 제공합니다.</li><li><strong>Publish/Subscribe (Pub/Sub) pattern</strong> : 다른 system 에서 data 를 가져와서 Kafka 에 <code>publish</code> (발행, 저장) 하거나 Kafka 로부터 data 를 <code>subscribe</code> (구독, 읽기) 할 수 있는 기능을 제공합니다.</li><li><strong>Decoupling</strong> : Kafka 에서는 pub/sub pattern 을 구현하기 위해 <code>producer</code> 와 <code>consumer</code> 가 존재합니다. 두 객체는 서로 의존적이지 않고 완벽하게 분리되어 있습니다.<ul><li><code>Producer</code> : Kafka 에 event 를 <code>publish</code> 하는 client application</li><li><code>Consumer</code> : Kafka 로부터 event 를 <code>subscribe</code> 하는 client application</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-kafka-architecture">2.2 Kafka Architecture<a class="hash-link" href="#22-kafka-architecture" title="Direct link to heading">​</a></h3><div style="text-align:center"><p><img loading="lazy" alt="Kafka Architecture" src="/tutorial/assets/images/kafka-4-0e5191358d1f14ab2306edc2fb21fe26.png" width="947" height="706" class="img_ev3q">
<!-- -->[그림 7-4]<!-- --> Kafka Architecture</p></div><p>[그림 7-4]<!-- -->는 Kafka 의 전체 Architecture 로 각각의 컴포넌트들에 대해 알아보겠습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-kafka-components">3. Kafka Components<a class="hash-link" href="#3-kafka-components" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-broker">3.1 Broker<a class="hash-link" href="#31-broker" title="Direct link to heading">​</a></h3><p>먼저, 브로커(Broker) 란 메시징 서비스를 담당해주는 Kafka 서버 또는 Kafka 시스템을 말합니다. 하나의 브로커는 하나의 Kafka Broker Process 를 의미합니다.
흔히 말하는 “<strong>Kafka 를 구성한다</strong>” 혹은 ”<strong>Kafka 를 통해 메시지를 전달한다</strong>” 에서 Kafka 는 브로커를 의미합니다.</p><p>프로세스를 구동하는 방법 (노드의 프로세스, 도커 컨테이너) 따라 다양한 방법으로 클러스터를 구성할 수 있는데 주로 단일 브로커가 아닌 다중 브로커를 사용합니다.
만약, 브로커가 여러 개일 경우, 각각의 브로커들을 ID 로 식별합니다.</p><p>브로커의 주요 역할은 <strong>토픽</strong>(<strong>topic) 내의 파티션(partition) 들의 분산, 유지 및 관리</strong>입니다.<br>
<!-- -->브로커 내부에는 여러 토픽들이 생성될 수 있고, 이러한 토픽들에 의해 파티션들이 생성되게 됩니다. 브로커는 파티션의 데이터를 분산하여 저장 해주기 때문에 시스템에 예기치 못한 장애 발생 하더라도 분산된 데이터를 통해 안전하게 데이터를 사용할 수 있도록 해줍니다.
브로커의 중요한 특징 중 하나는 토픽의 일부 파티션들을 포함하고 있지만, 데이터의 일부분인 파티션을 갖을 뿐 전체 데이터를 갖고 있지는 않습니다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-kafka-cluster">3.2 Kafka Cluster<a class="hash-link" href="#32-kafka-cluster" title="Direct link to heading">​</a></h3><p>Kafka 클러스터(cluster) 는 여러 개의 브로커로 이루어진 집합체를 말합니다. 일반적으로 최소 3대 이상의 브로커를 하나의 클러스터로 구성합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-topic">3.3 Topic<a class="hash-link" href="#33-topic" title="Direct link to heading">​</a></h3><p>토픽(Topic)이란 브로커에서 event (data) 를 관리하는 “<strong>기준</strong>” 또는 어떤 event 를 저장할 지를 정하는 “<strong>주제</strong>” 입니다.</p><p>토픽은 파일 시스템의 “<strong>폴더</strong>” 와 같고, event 는 폴더 속의 “<strong>파일</strong>” 과 같습니다. 전통적인 메시징 시스템과는 다르게 message (event) 들을 subscribe 해서 받아보더라도 그 message 는 삭제되지는 않습니다.
대신 토픽마다 지정된 기준에 따라 event 를 유지할 지 정할 수 있는데, 이 때 설정된 기간 또는 용량에 따라 event를 유지 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-partition">3.4 Partition<a class="hash-link" href="#34-partition" title="Direct link to heading">​</a></h3><p>토픽에는 파티션(partition)이 존재하며 모든 파티션들은 producer 로부터 전달된 데이터를 보관하는 역할을 합니다.</p><p>파티션은 반드시 존재하는 <strong>leader partition</strong> 과 존재할 수도 있는 <strong>follower partition</strong> 으로 구분됩니다.</p><ul><li><strong>Leader partition</strong> : leader partition 은 producer 또는 consumer 와 직접 통신하는 partition 입니다. Producer 또는 consumer 와 직접 통신함으로써 read 와 write 연산을 담당합니다.</li><li><strong>Follower partition</strong> : Producer 에 의해 leader partition 으로 전달된 data 를 replication 하여 복제된 data 를 저장합니다. Follower partition 의 가장 중요한 역할은 leader partition 의 데이터를 복사하여 보관하는 역할을 하고 있다가 leader partition 이 속해있는 broker 에 장애가 발생하면 follower partition 에서 leader partition 의 지위를 가지게 됩니다.</li></ul><p>그렇다면 leader partition 과 follower partition 의 개수는 어떻게 정해질까요?<br>
<!-- -->바로 <strong>replication factor</strong> 의 수에 따라 달라집니다. 예를 들어서 Broker A, B, C 가 있다고 가정해보겠습니다.</p><ol><li><strong>Partition 의 replication factor 가 1인 경우 (복제 없음)</strong> : replication factor 가 0 이므로 broker A 의 leader partition 의 데이터를 복제해서 가지고 있을 broker B, C 의 follower partition 이 없습니다. 즉, broker A 에만 leader partition 이 존재합니다. Broker A 의 partition 이 3개였다면, 3개 모두 leader partition 이 됩니다.</li><li><strong>Partition 의 replication factor 가 3인 경우 (복제 2개)</strong> : replication factor 가 3 이므로 broker A 의 leader partition 의 데이터를 복제해서 가지고 있을  broker B, C 의 follower partition 이 존재합니다. Broker A 의 partition 이 3개였다면, A, B, C 는 각각 하나의 leader partition 과 두개의 follower partition 을 가지게 됩니다.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-zookeeper">3.5 Zookeeper<a class="hash-link" href="#35-zookeeper" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="351-zookeeper">3.5.1 Zookeeper<a class="hash-link" href="#351-zookeeper" title="Direct link to heading">​</a></h4><p>Zookeeper 는 분산 시스템에서 시스템 간의 정보 유지, 상태 체크, 서버들 간의 동기화 등을 처리해주는 <strong>분산 코디네이션 서비스(distributed coordination service)</strong>입니다.<br>
<!-- -->Zookeeper 는 직접 어플리케이션 작업을 조율하지 않고, 조율하는 것을 쉽게 개발할 수 있도록 도와줍니다.
API 를 이용해 동기화를 하거나 마스터 선출 등의 작업을 쉽게 구현할 수 있게 해줍니다.
Zookeeper 의 데이터는 분산 작업을 제어하기 위해 트리 형태의 데이터 저장소에 snapshot 을 저장합니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="352-zookeeper-ensemble">3.5.2 Zookeeper Ensemble<a class="hash-link" href="#352-zookeeper-ensemble" title="Direct link to heading">​</a></h4><p>위의 그림에서 zookeeper ensemble 이란 zookeeper 서버의 클러스터를 뜻합니다. 하나의 zookeeper 서버에 문제가 생겼을 경우, zookeeper 서버들에 쌓이는 데이터를 기준으로 일관성을 맞추기 때문에 클러스터는 보통 홀수로 구축하며 최소 3개로 구축해야하며 일반적인 경우라면 5개를 권장합니다. </p><p>Zookeeper 에서도 파티션처럼 하나의 leader (write) 서버가 있고, 나머지 follower (read) 서버가 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="36-producer--consumer">3.6 Producer &amp; Consumer<a class="hash-link" href="#36-producer--consumer" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="361-producer">3.6.1 Producer<a class="hash-link" href="#361-producer" title="Direct link to heading">​</a></h4><p>Producer 는 <strong>메시지를 생산(produce)</strong> 해서 브로커의 토픽으로 메시지를 보내는 역할을 하는 어플리케이션 또는 서버입니다.</p><ul><li>데이터를 전송할 때 leader partition 을 가지고 있는 브로커와 직접 통신합니다.</li><li>원하는 토픽의 파티션에 전송만하며 이후에 어떤 consumer 에게 전송되는 지는 신경쓰지 않습니다.<br>쉽게 생각하면 우체원이 우편함에 편지를 넣듯 프로듀서는 메세지를 저장만 합니다.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="361-consumer">3.6.1 Consumer<a class="hash-link" href="#361-consumer" title="Direct link to heading">​</a></h4><p>Consumer 는 토픽의 파티션에 저장되어 있는 <strong>메시지를 소비(consume)</strong> 역할을 하는 어플리케이션 또는 서버입니다.</p><ul><li>데이터를 요청할 때 leader partition 을 가지고 있는 브로커와 통신하여 토픽의 파티션으로부터 데이터를 가져갑니다.</li><li>Consumer 운영 방법은 2가지가 있습니다.<ol><li>토픽의 특정 partition 만 구독하는 consumer 를 운영</li><li>1개 이상의 consumer 로 이루어진 consumer 그룹을 운영</li></ol></li><li>Consumer 역시 어떤 producer 에게서 메시지가 왔는지는 관심이 없고, 원하는 토픽의 파티션을 subscribe 하여 필요한 메시지만 받게 됩니다.<br>쉽게 생각하면 우편을 받을 때 어떤 우체원에게서 왔는지는 모르고, 우편함에 있는 편지만 가져가는 것처럼 메세지를 구독만 합니다.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mlops-for-mle/tutorial/tree/main/docs/kafka/kafka-introduction.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-12-20T07:41:04.000Z">Dec 20, 2022</time></b> by <b>Dongmin Lee</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tutorial/docs/kafka/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">0) Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tutorial/docs/kafka/producer-consumer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">2) Producer &amp; Consumer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#목표" class="table-of-contents__link toc-highlight">목표</a></li><li><a href="#1-메시징-시스템" class="table-of-contents__link toc-highlight">1. 메시징 시스템</a><ul><li><a href="#11-용어-정리" class="table-of-contents__link toc-highlight">1.1 용어 정리</a></li></ul></li><li><a href="#2-kafka" class="table-of-contents__link toc-highlight">2. Kafka</a><ul><li><a href="#22-features" class="table-of-contents__link toc-highlight">2.2 Features</a></li><li><a href="#22-kafka-architecture" class="table-of-contents__link toc-highlight">2.2 Kafka Architecture</a></li></ul></li><li><a href="#3-kafka-components" class="table-of-contents__link toc-highlight">3. Kafka Components</a><ul><li><a href="#31-broker" class="table-of-contents__link toc-highlight">3.1 Broker</a></li><li><a href="#32-kafka-cluster" class="table-of-contents__link toc-highlight">3.2 Kafka Cluster</a></li><li><a href="#33-topic" class="table-of-contents__link toc-highlight">3.3 Topic</a></li><li><a href="#34-partition" class="table-of-contents__link toc-highlight">3.4 Partition</a></li><li><a href="#35-zookeeper" class="table-of-contents__link toc-highlight">3.5 Zookeeper</a></li><li><a href="#36-producer--consumer" class="table-of-contents__link toc-highlight">3.6 Producer &amp; Consumer</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://makinarocks.ai" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/tutorial/img/makinarocks.png" alt="MakinaRocks" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/tutorial/img/makinarocks.png" alt="MakinaRocks" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2022 MakinaRocks. Built with Docusaurus.</div></div></div></footer></div>
<script src="/tutorial/assets/js/runtime~main.ae2f8874.js"></script>
<script src="/tutorial/assets/js/main.20a80eb8.js"></script>
</body>
</html>